<!-- C -->
# jQuery + Sass な SPA Rails アプリを React + CSS in JS にリプレースした話

jQuery→Reactリプレース

Remottyをリプレースする
SPA, チャット, 掲示板...

jQuery辛い感

状態管理
- data-xxx, selectorとかがいっぱい
- changeイベントを拾って...
イベントが分散しがち
*技術トレンドから遅れている感*

Reactへの置き換えで...
それなりに時間がかかるから難しい(時間が取れない)
サービス改善も入る
引き継ぎだったのでどのくらい大変なのかわからない...

*小口化*
- 工程ごとにッセイに作るのではなく、動くものまで一気通貫で少しずつ作っていく方法
- sonicgardenの価値観の一つ

機能の小口化
- 機能的に疎結合なパーツに分けて、段階的に置き換える
- 要素が少なさそうなパーツから着手する

網羅性の小口化
- 全てのコンポーネントを完全にReactには置き換えない
  - イベントハンドリングやstate管理などを大変なものを優先
- 複雑でないものは後回し

影響度の小口化
- いきなり公開はしない
  - 社内での限定公開(フィーチャートグルと言うらしい)
- jQuery版、React版両バージョンの動作はテストで担保

---

未知の領域
- Reactでのリニューアル?
- React?フロントエンド?

Sass→CSSinJS
- 既存のCSSには手を加えずに疎の状態で変えたい。
- styled-components
機能の小口化と同様小さいパーツから適用

jQuery→Reactの振る舞い
- Reactに振る舞いを閉じ込める形にする
振る舞いを個別に切り分け、対応するライブラリで置き換える

jQuery, ReactでのRSpec並行稼働
新旧デザインに依存しないセレクタでspecを実行

Reactでのi18n化
- React上ではi18n.tが使えない...
- 翻訳データは性的データではなく自社Webサービスで管理してた
~~React-i18nextを試してみる?~~
翻訳データを返すメソッドを利用し、XHRでリクエスト
(- まあこれになるよね)
